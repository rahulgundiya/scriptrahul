<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link
      href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css"
      rel="stylesheet"
      id="bootstrap-css"
    />
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="home.css" />
    <style>
      div.mycontainer {
        width: 100%;
        overflow: auto;
        padding-top: 0px;
      }
      div.mycontainer button {
        width: 12%;
        margin: 0 0 20px;
        float: right;
        background-color: blue;
      }
    </style>
  </head>
  <body>
    <div>
      <input type="text" id="currentId" hidden />
    </div>
    <div class="container">
      <div class="row centered-form">
        <div
          class="col-xs-12 col-sm-8 col-md-4 col-sm-offset-2 col-md-offset-4"
        >
          <div class="panel panel-default">
            <div class="panel-body">
              <button
                type="logout"
                style="float: right; background-color: lightblue"
                onclick="logout()"
              >
                Logout
              </button>
              <form role="form">
                <div class="mycontainer"></div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <h6>Profile Details</h6>
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="fullname"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <h6 style="margin-left: 30px">Address Details</h6>
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="address"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="email"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>

                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="city"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="password"
                        name=""
                        id="password"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="stats"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="number"
                        name=""
                        id="mobile"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>

                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input
                        type="text"
                        name=""
                        id="pincode"
                        class="form-control input-sm"
                        disabled="disabled"
                      />
                    </div>
                  </div>
                </div>
              </form>
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <div>
                      <button
                        type="submit"
                        name=""
                        id="edit"
                        class="form-control1"
                        onclick="editData()"
                      >
                        Edit
                      </button>
                      <div class="form4">
                        <button
                          type="submit"
                          class="form2"
                          id="save"
                          style="display: none"
                          onclick="saveUserToStorage()"
                        >
                          Save
                        </button>
                        <button
                          type="submit"
                          id="cancel"
                          class="form2"
                          style="display: none"
                          onclick="cancelData()"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xs-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <div>
                      <button
                        type="submit"
                        name=""
                        id="edit2"
                        class="form-control1"
                        onclick="editData2()"
                      >
                        Edit
                      </button>
                      <div class="form3">
                        <button
                          type="submit"
                          id="save2"
                          class="form2"
                          style="display: none"
                          onclick="saveUserToStorage()"
                        >
                          Save
                        </button>
                        <button
                          type="submit"
                          id="cancel2"
                          class="form2"
                          style="display: none"
                          onclick="cancelData()"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    function getValue() {
      var parseId = localStorage.getItem("userid");
      document.getElementById("currentId").value = parseId;
      console.log("Parse Email" + parseId);
      var parseEmail = localStorage.getItem("email");
      document.getElementById("email").value = parseEmail;
      var parsePassword = localStorage.getItem("password");
      document.getElementById("password").value = parsePassword;
      var parseName = localStorage.getItem("fullname");
      document.getElementById("fullname").value = parseName;
      console.log("Parse Email" + parseName);
      var parseAddress = localStorage.getItem("address");
      document.getElementById("address").value = parseAddress;
      console.log("Parse Email" + parseAddress);
      var parseCity = localStorage.getItem("city");
      document.getElementById("city").value = parseCity;
      var parseMobile = localStorage.getItem("mobile");
      document.getElementById("mobile").value = parseMobile;
      var parsePin = localStorage.getItem("pincode");
      document.getElementById("pincode").value = parsePin;
      var parseState = localStorage.getItem("stats");
      document.getElementById("stats").value = parseState;
    }
    getValue();
  </script>
  <script>
    function editData() {
      document.getElementById("fullname").disabled = false;
      document.getElementById("email").disabled = false;
      document.getElementById("password").disabled = false;
      document.getElementById("mobile").disabled = false;
      fullname.focus();
      var button = (document.getElementById("edit").style.display = "none");
      var save = (document.getElementById("save").style.display = "block");
      var save = (document.getElementById("cancel").style.display = "block");
    }

    function saveUserToStorage() {
      //console.log("hii Dear Your ID "+parseId);
      // var parseId=localStorage.getItem("userid");

      // var data;
      // let current_user = JSON.parse(localStorage.getItem("users"))
      //   ? JSON.parse(localStorage.getItem("users"))
      //   : [];
      //   for(let x in current_user)
      //   {
      //   if(current_user[x].userid=="ids")

      //  console.log("My Array " +data.userid);
      var parseId = document.getElementById("currentId").value;
      var parseEmail = document.getElementById("email").value;
      //localStorage.setItem("email", parseEmail);
      var parseName = document.getElementById("fullname").value;
      //localStorage.setItem("fullname", parseName);
      var parseAddress = document.getElementById("address").value;
      //localStorage.setItem("address", parseAddress);
      var parsePassword = document.getElementById("password").value;
      //localStorage.setItem("password", parsePassword);
      var parseCity = document.getElementById("city").value;
      //localStorage.setItem("city", parseCity);
      var parseMobile = document.getElementById("mobile").value;
      //localStorage.setItem("mobile", parseMobile);
      var parsePin = document.getElementById("pincode").value;
      //localStorage.setItem("pincode", parsePin);
      var parseState = document.getElementById("stats").value;
      //localStorage.setItem("stats", parseState);

      var user = {
        userid: parseId,
        fullname: parseName,
        address: parseAddress,
        email: parseEmail,
        city: parseCity,
        password: parsePassword,
        stats: parseState,
        mobile: parseMobile,
        pincode: parsePin,
      };
      var current_user = JSON.parse(localStorage.getItem("users")) || [];
      // let foundIndex=current_user.findIndex(element=>element.userid===parseId)
      // current_user.splice(foundIndex,1,user)
      current_user.forEach((element, index) => {
        if (element.userid == parseId) {
          current_user[index] = user;
        }
      });

      localStorage.setItem("users", JSON.stringify(current_user));
      localStorage.setItem("fullname", parseName);
      localStorage.setItem("address", parseAddress);
      localStorage.setItem("email", parseEmail);
      localStorage.setItem("city", parseCity);
      localStorage.setItem("password", parsePassword);
      localStorage.setItem("stats", parseState);
      localStorage.setItem("mobile", parseMobile);
      localStorage.setItem("pincode", parsePin);
      window.location.replace("home.html");
      //getValue();
    }
    //userList.push(users);
    //localStorage.setItem('userList',JSON.stringify(userList));

    function editData2() {
      document.getElementById("address").disabled = false;
      document.getElementById("city").disabled = false;
      document.getElementById("stats").disabled = false;
      document.getElementById("pincode").disabled = false;
      address.focus();
      document.getElementById("edit2").style.display = "none";
      document.getElementById("save2").style.display = "block";
      document.getElementById("cancel2").style.display = "block";
    }
    function cancelData() {
      window.location.replace("home.html");
    }
    function logout() {
      localStorage.removeItem("email");
      localStorage.removeItem("password");
      window.location.replace("login.html");
    }
  </script>
</html>
